<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ZADORA Lite â€” Ù…ØªØ¬Ø± Ø¨Ø³ÙŠØ· ÙŠØ¹Ù…Ù„ Ù…Ù† Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„</title>
<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0f0f10; --card:#17181a; --muted:#9aa0a6; --text:#f5f5f5; --red:#d91111;
  --accent:#C19A6B; --accent-700:#A67C52; --accent-50:#F4ECE3;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:"Cairo",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
a{color:inherit;text-decoration:none}
.container{max-width:1100px;margin:0 auto;padding:0 14px}
.header{position:sticky;top:0;z-index:50;background:#0b0c0d;border-bottom:1px solid #222}
.header__in{display:flex;align-items:center;gap:10px;padding:10px 0}
.brand{display:flex;align-items:center;font-weight:800;letter-spacing:.3px}
.brand__logo{width:32px;height:32px;border:2px solid var(--accent);display:grid;place-items:center;border-radius:8px;margin-left:8px}
.btn{border:0;border-radius:12px;padding:10px 12px;cursor:pointer;font-weight:800}
.btn-accent{background:var(--accent);color:#000}
.btn-ghost{background:transparent;border:1px solid #2a2a2a;color:#fff}
.badge{display:inline-block;font-size:12px;border:1px solid #2a2a2a;background:#1a1a1a;color:var(--muted);padding:4px 8px;border-radius:8px}
.input{width:100%;background:#0e0e0f;border:1px solid #2a2a2a;color:#fff;border-radius:12px;padding:10px}
.hero{padding:22px 0;border-bottom:1px solid #202124;background:linear-gradient(180deg,#131416,rgba(19,20,22,0))}
.hero h1{margin:.2em 0;font-size:26px}
.grid{display:grid;gap:14px}
.grid--products{grid-template-columns:repeat(auto-fit,minmax(180px,1fr));padding:18px 0}
.card{background:var(--card);border:1px solid #222;border-radius:14px;overflow:hidden}
.card img{width:100%;height:150px;object-fit:cover;background:#111}
.card .pad{padding:10px}
.price{font-weight:800}
.footer{border-top:1px solid #202124;color:var(--muted);padding:16px 0;margin-top:24px;text-align:center}
.row{display:flex;gap:10px;align-items:center}
.flex-1{flex:1}
.hide{display:none}
.topbar{background:#000;border-bottom:1px solid #222}
.topbar__in{display:flex;gap:12px;justify-content:center;padding:6px 8px;font-weight:700}
.navbtns{display:flex;gap:6px;flex-wrap:wrap}

/* ÙƒØ§Ø±Øª Ø§Ù„Ø³Ù„Ø©/Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ */
.sheet{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:flex-end}
.sheet__inner{background:#0d0e0f;border-top-left-radius:16px;border-top-right-radius:16px;border:1px solid #222;padding:14px 12px;width:100%;max-height:80vh;overflow:auto}
.cart-list{display:grid;gap:10px}
.cart-item{display:flex;gap:10px;align-items:center;justify-content:space-between;background:#151617;border:1px solid #222;padding:10px;border-radius:12px}
.kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
.kpi{background:#151617;border:1px solid #222;border-radius:12px;padding:12px;text-align:center}
@media(max-width:700px){.kpis{grid-template-columns:repeat(2,1fr)}}

/* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© Ù„Ù„Ø£Ù‚Ø³Ø§Ù… */
.dropdown{position:relative}
.dropdown-panel{position:absolute;inset-inline-end:0;top:100%;margin-top:.5rem;width:220px;background:#101112;border:1px solid #222;border-radius:12px;box-shadow:0 16px 40px rgba(0,0,0,.25);overflow:hidden;z-index:60}
.dropdown-panel a{display:block;padding:10px 12px;border-bottom:1px solid #1f2022}
.dropdown-panel a:hover{background:#16181a}

/* ØªÙŠÙƒØ± Ø¬Ø§Ù†Ø¨ÙŠ */
#sideTicker{position:fixed;right:12px;top:50%;transform:translateY(-50%);z-index:40;border:1px solid #222;background:#0d0e0f;border-radius:18px;overflow:hidden}
#sideTicker .marquee{white-space:nowrap;display:inline-block;padding:8px 16px;animation:tickerBounce 12s linear infinite alternate}
@keyframes tickerBounce{0%{transform:translateX(0)}100%{transform:translateX(-55%)}}
@media(max-width:640px){#sideTicker{bottom:120px;top:auto;transform:none;right:12px}}
</style>
</head>
<body>

<div class="topbar"><div class="container topbar__in">ğŸšš Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… â€¢ ğŸ” Ø§Ø³ØªØ¨Ø¯Ø§Ù„ 14 ÙŠÙˆÙ… â€¢ ğŸ•˜ Ø¯Ø¹Ù… 9Øµâ€“10Ù…</div></div>

<header class="header">
  <div class="container header__in">
    <div class="brand"><span class="brand__logo">Z</span> ZADORA</div>
    <div class="flex-1"></div>

    <div class="navbtns">
      <div class="dropdown">
        <button id="catsBtn" class="btn btn-ghost">Ø§Ù„Ø£Ù‚Ø³Ø§Ù… â–¾</button>
        <div id="catsMenu" class="dropdown-panel hide">
          <a href="#" data-cat="all">Ø§Ù„ÙƒÙ„</a>
          <a href="#" data-cat="Kitchen">Ù…Ø·Ø¨Ø®</a>
          <a href="#" data-cat="Home">Ù…Ù†Ø²Ù„</a>
          <a href="#" data-cat="Gifts">Ù‡Ø¯Ø§ÙŠØ§</a>
        </div>
      </div>

      <button class="btn btn-ghost" onclick="show('home')">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
      <button class="btn btn-ghost" onclick="show('products')">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
      <button class="btn btn-ghost" id="openCartBtn">Ø§Ù„Ø³Ù„Ø© <span data-cart-count>0</span></button>
      <button class="btn btn-ghost" id="openAdminBtn">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
    </div>
  </div>

  <div class="container" style="padding:8px 0 12px">
    <form id="searchForm" class="row">
      <input id="search" class="input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬â€¦" />
      <button class="btn btn-accent" type="submit">Ø¨Ø­Ø«</button>
    </form>
  </div>
</header>

<main class="container">
  <section id="home" class="hero">
    <h1>Ù…Ù†ØªØ¬Ø§Øª Ù…Ù†Ø²Ù„ÙŠØ© ÙˆÙ‡Ø¯Ø§ÙŠØ§ Ø¨Ø¬ÙˆØ¯Ø© Ù…Ù…ØªØ§Ø²Ø©</h1>
    <p style="color:var(--muted)">Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ù…ÙÙ†ØªÙ‚Ø§Ø© Ù„Ù…Ø·Ø¨Ø®Ùƒ ÙˆÙ…Ù†Ø²Ù„Ùƒ â€” Ø§Ø´ØªØ±Ù Ø§Ù„Ø¢Ù† ÙˆØ§Ø³ØªÙ„Ù… Ø¹Ù„Ù‰ Ø¨Ø§Ø¨ Ø§Ù„Ø¨ÙŠØª</p>
    <div class="row" style="justify-content:center;margin-top:10px">
      <button class="btn btn-accent" onclick="show('products')">ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†</button>
      <button class="btn btn-ghost" onclick="openCart()">Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø©</button>
    </div>
  </section>

  <section style="padding:16px 0">
    <div class="kpis">
      <div class="kpi"><div class="badge">Ø§Ù„Ø´Ø­Ù†</div><div style="font-weight:800;margin-top:6px">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª</div></div>
      <div class="kpi"><div class="badge">Ø§Ù„Ø¯ÙØ¹</div><div style="font-weight:800;margin-top:6px">Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</div></div>
      <div class="kpi"><div class="badge">Ø§Ù„Ø¯Ø¹Ù…</div><div style="font-weight:800;margin-top:6px">9Øµâ€“10Ù…</div></div>
      <div class="kpi"><div class="badge">Ø§Ø³ØªØ¨Ø¯Ø§Ù„</div><div style="font-weight:800;margin-top:6px">14 ÙŠÙˆÙ…</div></div>
    </div>
  </section>

  <section id="products" class="hide">
    <div class="row" style="justify-content:space-between;align-items:center">
      <h2 style="margin:10px 0">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
      <span class="badge" id="activeCatLabel">Ø§Ù„ÙƒÙ„</span>
    </div>
    <div id="productsGrid" class="grid grid--products"></div>
  </section>
</main>

<!-- Ø´ÙŠØª Ø§Ù„Ø³Ù„Ø© -->
<div id="cartSheet" class="sheet" role="dialog" aria-modal="true">
  <div class="sheet__inner">
    <div class="row" style="justify-content:space-between">
      <h3 style="margin:0">Ø§Ù„Ø³Ù„Ø©</h3>
      <button class="btn btn-ghost" onclick="closeCart()">Ø¥ØºÙ„Ø§Ù‚ âœ•</button>
    </div>
    <div id="cartList" class="cart-list" style="margin-top:10px"></div>
    <div class="row" style="justify-content:space-between;margin-top:12px">
      <div class="price">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="cartTotal">EGP 0</span></div>
      <button class="btn btn-accent" onclick="scrollToCheckout()">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</button>
    </div>
    <div id="checkout" style="margin-top:14px">
      <h4 style="margin:6px 0">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„</h4>
      <div class="grid">
        <input id="custName" class="input" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ" />
        <input id="custAddr" class="input" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„ + Ø§Ù„Ù…Ù†Ø·Ù‚Ø©/Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©" />
        <textarea id="custNote" class="input" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø·Ù„Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></textarea>
      </div>
      <button class="btn btn-accent" style="margin-top:10px" onclick="whatsappCheckout()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨</button>
      <div class="badge" style="margin-top:8px">Ø³ÙŠØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨ Ù‚Ø¨Ù„ Ø§Ù„Ø´Ø­Ù†</div>
    </div>
  </div>
</div>

<!-- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø®ÙÙŠÙØ© -->
<div id="adminSheet" class="sheet" role="dialog" aria-modal="true">
  <div class="sheet__inner">
    <div class="row" style="justify-content:space-between">
      <h3 style="margin:0">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù…Ø­Ù„ÙŠØ©)</h3>
      <button class="btn btn-ghost" onclick="closeAdmin()">Ø¥ØºÙ„Ø§Ù‚ âœ•</button>
    </div>
    <form onsubmit="event.preventDefault(); adminAddProduct(this);" class="grid" style="margin-top:12px">
      <input name="name" class="input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬" required />
      <input name="price" class="input" placeholder="Ø§Ù„Ø³Ø¹Ø± (EGP)" type="number" min="0" step="1" required />
      <input name="img" class="input" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ› Ø¥Ø°Ø§ ÙØ±Ù‘ØºØª ÙŠØ³ØªØ®Ø¯Ù… ØµÙˆØ±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©)" />
      <input name="cat" class="input" placeholder="Ø§Ù„Ù‚Ø³Ù… (Kitchen / Home / Gifts â€¦)" />
      <button class="btn btn-accent" type="submit">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>
    </form>
    <div class="badge" style="margin-top:10px">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØªØ®Ø²Ù† Ù…Ø­Ù„ÙŠÙ‹Ø§ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ (LocalStorage) Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„ØªØ¬Ø±Ø¨Ø©.</div>
  </div>
</div>

<!-- ØªÙŠÙƒØ± Ø¬Ø§Ù†Ø¨ÙŠ -->
<div id="sideTicker">
  <div class="marquee">Ø®ØµÙ… Ø§ÙØªØªØ§Ø­ â€” Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø¬Ø§Ù†ÙŠØ© â€” Ø´Ø­Ù† Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª â€” Ø®ØµÙ… Ø§ÙØªØªØ§Ø­ â€” Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø¬Ø§Ù†ÙŠØ© â€” Ø´Ø­Ù† Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª â€” </div>
</div>

<footer class="footer">Â© 2025 ZADORA â€¢ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</footer>

<script>
/* ====== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© ====== */
const WHATSAPP_PHONE = '201119508881'; // â† ØºÙŠÙ‘Ø± Ø±Ù‚Ù…Ùƒ Ù‡Ù†Ø§ (Ø¨Ø¯ÙˆÙ† +)
const STORE_KEY = 'zadora_products_v1';
const CART_KEY  = 'zadora_cart_v1';
const IMG_FALLBACK = 'data:image/svg+xml;base64,'+btoa(`<svg xmlns="http://www.w3.org/2000/svg" width="800" height="520"><rect width="100%" height="100%" fill="#1c1d1f"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#777" font-size="28" font-family="sans-serif">ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬</text></svg>`);

/* ====== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ© ====== */
function sampleProducts(){
  return [
    {id:'p1',name:'Ø·Ù‚Ù… Ù…Ø¬Ø§Øª Ø³ÙŠØ±Ø§Ù…ÙŠÙƒ x6', price:420, cat:'Gifts',  img:IMG_FALLBACK},
    {id:'p2',name:'ØµÙŠÙ†ÙŠØ© Ø§Ø³ØªØ§Ù†Ù„Ø³ 40 Ø³Ù…',  price:350, cat:'Kitchen',img:IMG_FALLBACK},
    {id:'p3',name:'Ø¨Ø±Ø·Ù…Ø§Ù† Ø²Ø¬Ø§Ø¬ 1 Ù„ØªØ±',   price:120, cat:'Home',   img:IMG_FALLBACK},
    {id:'p4',name:'ØºÙ„Ø§ÙŠØ© Ø¨Ø§ÙŠØ±ÙƒØ³ 2 Ù„ØªØ±',  price:540, cat:'Kitchen',img:IMG_FALLBACK}
  ];
}

/* ====== LocalStorage Helpers ====== */
const getProducts = () => JSON.parse(localStorage.getItem(STORE_KEY) || 'null') || (localStorage.setItem(STORE_KEY, JSON.stringify(sampleProducts())), sampleProducts());
const setProducts = (arr) => localStorage.setItem(STORE_KEY, JSON.stringify(arr));
const getCart     = () => JSON.parse(localStorage.getItem(CART_KEY) || '[]');
const setCart     = (arr) => localStorage.setItem(CART_KEY, JSON.stringify(arr));

/* ====== UI Helpers ====== */
const $ = (sel)=>document.querySelector(sel);
const $$= (sel)=>[...document.querySelectorAll(sel)];
function show(id){ ['home','products'].forEach(s=>$('#'+s).classList.toggle('hide', s!==id)); if(id==='products') renderProducts(); }
function renderCartBadge(){ $$('[data-cart-count]').forEach(el=>el.textContent = getCart().reduce((s,i)=>s+i.qty,0)); }
function money(n){ return 'EGP '+ Number(n||0).toLocaleString('en-EG'); }

/* ====== Ø±Ù†Ø¯Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ====== */
function renderProducts(filterCat='all', q=''){
  const wrap = $('#productsGrid');
  const items = getProducts().filter(p=>{
    const byCat = filterCat==='all' || p.cat===filterCat;
    const byQ   = !q || (p.name||'').includes(q);
    return byCat && byQ;
  });
  wrap.innerHTML = items.map(p=>`
    <div class="card">
      <img src="${p.img||IMG_FALLBACK}" alt="${p.name}" onerror="this.src='${IMG_FALLBACK}'">
      <div class="pad">
        <div class="badge">${p.cat||'Ø¹Ø§Ù…'}</div>
        <h3 style="margin:.4em 0">${p.name}</h3>
        <div class="row" style="justify-content:space-between;align-items:center">
          <div class="price">${money(p.price)}</div>
          <button class="btn btn-accent" onclick="addToCart('${p.id}')">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
        </div>
      </div>
    </div>
  `).join('');
}

/* ====== Ø§Ù„Ø³Ù„Ø© ====== */
function addToCart(id){
  const cart = getCart();
  const idx = cart.findIndex(i=>i.id===id);
  if(idx>-1) cart[idx].qty+=1; else cart.push({id,qty:1});
  setCart(cart); renderCartBadge();
  openCart();
}
function qty(id,delta){
  const cart = getCart();
  const i = cart.findIndex(x=>x.id===id);
  if(i>-1){ cart[i].qty+=delta; if(cart[i].qty<1) cart.splice(i,1); setCart(cart); renderCart(); renderCartBadge(); }
}
function removeItem(id){ setCart(getCart().filter(x=>x.id!==id)); renderCart(); renderCartBadge(); }
function renderCart(){
  const list = $('#cartList'); const totalEl = $('#cartTotal');
  const products = getProducts(); const cart = getCart();
  if(cart.length===0){ list.innerHTML = '<div class="badge">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</div>'; totalEl.textContent='EGP 0'; return; }
  let total=0;
  list.innerHTML = cart.map(it=>{
    const p = products.find(x=>x.id===it.id);
    const sum = (p?.price||0)*it.qty; total+=sum;
    return `
      <div class="cart-item">
        <div class="row">
          <img src="${p?.img||IMG_FALLBACK}" style="width:70px;height:70px;object-fit:cover;border-radius:10px" onerror="this.src='${IMG_FALLBACK}'" />
          <div>
            <div style="font-weight:800">${p?.name||'-'}</div>
            <div class="badge">${money(p?.price||0)} Ã— ${it.qty}</div>
          </div>
        </div>
        <div>
          <div class="price" style="text-align:end">${money(sum)}</div>
          <div class="row" style="justify-content:flex-end;margin-top:6px">
            <button class="btn btn-ghost" onclick="qty('${it.id}',-1)">âˆ’</button>
            <button class="btn btn-ghost" onclick="qty('${it.id}',1)">+</button>
            <button class="btn btn-ghost" onclick="removeItem('${it.id}')">Ø­Ø°Ù</button>
          </div>
        </div>
      </div>
    `;
  }).join('');
  totalEl.textContent = money(total);
}
function openCart(){ $('#cartSheet').style.display='flex'; renderCart(); }
function closeCart(){ $('#cartSheet').style.display='none'; }
function scrollToCheckout(){ $('#checkout').scrollIntoView({behavior:'smooth'}); }

/* ====== ÙˆØ§ØªØ³Ø§Ø¨ ØªØ´ÙŠÙƒ Ø¢ÙˆØª ====== */
function whatsappCheckout(){
  const products = getProducts(); const cart = getCart();
  if(cart.length===0){ alert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©'); return; }
  let lines = ['Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† ZADORA:'];
  let total = 0;
  cart.forEach(it=>{
    const p = products.find(x=>x.id===it.id);
    const s = (p?.price||0)*it.qty; total+=s;
    lines.push(`- ${p?.name} Ã— ${it.qty} = ${s} EGP`);
  });
  lines.push(`Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ = ${total} EGP`);
  const name = $('#custName').value||''; const addr=$('#custAddr').value||''; const note=$('#custNote').value||'';
  if(name) lines.push('Ø§Ù„Ø§Ø³Ù…: '+name); if(addr) lines.push('Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: '+addr); if(note) lines.push('Ù…Ù„Ø§Ø­Ø¸Ø§Øª: '+note);
  const msg = encodeURIComponent(lines.join('\n'));
  window.open(`https://wa.me/${WHATSAPP_PHONE}?text=${msg}`,'_blank');
}

/* ====== Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (Ù…Ø­Ù„ÙŠ) ====== */
function adminAddProduct(form){
  const fd = new FormData(form);
  const p = {
    id:'p'+Math.random().toString(36).slice(2,7),
    name:fd.get('name'), price:parseFloat(fd.get('price')||'0'),
    img:fd.get('img')||IMG_FALLBACK, cat:fd.get('cat')||'General'
  };
  const list = getProducts(); list.push(p); setProducts(list);
  alert('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬! Ø§ÙØªØ­ ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ù…Ø´Ø§Ù‡Ø¯ØªÙ‡'); form.reset(); show('products');
}
function openAdmin(){ $('#adminSheet').style.display='flex'; }
function closeAdmin(){ $('#adminSheet').style.display='none'; }

/* ===== Ø§Ù„Ø£Ù‚Ø³Ø§Ù… + Ø§Ù„Ø¨Ø­Ø« ===== */
let activeCat='all';
$('#catsBtn').addEventListener('click',()=>$('#catsMenu').classList.toggle('hide'));
$('#catsMenu').addEventListener('click',e=>{
  if(e.target.matches('[data-cat]')){
    e.preventDefault(); activeCat = e.target.dataset.cat;
    $('#activeCatLabel').textContent = activeCat==='all' ? 'Ø§Ù„ÙƒÙ„' : activeCat;
    renderProducts(activeCat, $('#search').value.trim());
    $('#catsMenu').classList.add('hide');
    show('products');
  }
});
$('#searchForm').addEventListener('submit',e=>{
  e.preventDefault();
  renderProducts(activeCat, $('#search').value.trim());
  show('products');
});

/* ===== Ø£Ø­Ø¯Ø§Ø« Ø¹Ø§Ù…Ø© ===== */
$('#openCartBtn').addEventListener('click',openCart);
$('#openAdminBtn').addEventListener('click',openAdmin);
$('#cartSheet').addEventListener('click',e=>{ if(e.target.id==='cartSheet') closeCart(); });
$('#adminSheet').addEventListener('click',e=>{ if(e.target.id==='adminSheet') closeAdmin(); });

/* ===== ØªÙ‡ÙŠØ¦Ø© ===== */
document.addEventListener('DOMContentLoaded',()=>{
  show('home'); renderCartBadge(); // Ø¨ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
  // Ø£ÙˆÙ„ ØªØ­Ù…ÙŠÙ„: Ø£Ù†Ø´Ø¦ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ùˆ Ù…Ø´ Ù…ÙˆØ¬ÙˆØ¯Ø©
  if(!localStorage.getItem(STORE_KEY)) setProducts(sampleProducts());
});
</script>
</body>
</html>