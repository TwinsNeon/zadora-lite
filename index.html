<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ZADORA — Wholesale</title>
<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{--bg:#0f0f10;--card:#17181a;--muted:#9aa0a6;--text:#f5f5f5;--accent:#C19A6B;--accent-700:#A67C52}
*{box-sizing:border-box}html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:"Cairo",system-ui}
.container{max-width:1100px;margin:0 auto;padding:0 14px}
a{color:inherit;text-decoration:none}
.header{position:sticky;top:0;z-index:40;background:#0b0c0d;border-bottom:1px solid #222}
.header__in{display:flex;gap:10px;align-items:center;padding:10px 0}
.brand{display:flex;align-items:center;font-weight:800}.brand__logo{width:32px;height:32px;border:2px solid var(--accent);display:grid;place-items:center;border-radius:8px;margin-left:8px}
.btn{border:1px solid #2a2a2a;border-radius:12px;padding:10px 12px;cursor:pointer;font-weight:800;background:#0f0f10;color:#fff}
.btn-accent{background:var(--accent);color:#000;border:0}
.badge{display:inline-block;font-size:12px;border:1px solid #2a2a2a;background:#1a1a1a;color:var(--muted);padding:4px 8px;border-radius:8px}
.input{width:100%;background:#0e0e0f;border:1px solid #2a2a2a;color:#fff;border-radius:12px;padding:10px}
.grid{display:grid;gap:14px}.grid--products{grid-template-columns:repeat(auto-fit,minmax(180px,1fr));padding:18px 0}
.card{background:var(--card);border:1px solid #222;border-radius:14px;overflow:hidden}
.card img{width:100%;height:150px;object-fit:cover;background:#111}
.card .pad{padding:10px}
.price{font-weight:800}
.footer{border-top:1px solid #202124;color:var(--muted);padding:16px 0;margin-top:24px;text-align:center}
.row{display:flex;gap:10px;align-items:center}
.flex-1{flex:1}

/* Hero */
.hero{position:relative;min-height:280px;display:grid;place-items:center;border-bottom:1px solid #202124}
.hero::before{content:"";position:absolute;inset:0;background:
 linear-gradient( to bottom, rgba(15,15,16,.5), rgba(15,15,16,.8)),
 url('https://images.unsplash.com/photo-1517341725612-5f06f483f2f9?q=80&w=1400&auto=format&fit=crop') center/cover no-repeat;}
.hero>.inner{position:relative;text-align:center;padding:40px 14px}
.hero h1{margin:.2em 0 0;font-size:28px}
.hero p{color:#ddd;margin:6px 0 14px}

/* Cart sheet */
.sheet{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:flex-end}
.sheet__inner{background:#0d0e0f;border-top-left-radius:16px;border-top-right-radius:16px;border:1px solid #222;padding:14px 12px;width:100%;max-height:85vh;overflow:auto}
.cart-list{display:grid;gap:10px}
.cart-item{display:flex;gap:10px;align-items:center;justify-content:space-between;background:#151617;border:1px solid #222;padding:10px;border-radius:12px}

/* Ticker */
#sideTicker{position:fixed;right:12px;top:50%;transform:translateY(-50%);z-index:30;border:1px solid #222;background:#0d0e0f;border-radius:18px;overflow:hidden}
#sideTicker .marquee{white-space:nowrap;display:inline-block;padding:8px 16px;animation:ticker 12s linear infinite alternate}
@keyframes ticker{0%{transform:translateX(0)}100%{transform:translateX(-55%)}}
@media(max-width:640px){#sideTicker{bottom:110px;top:auto;transform:none}}
</style>
</head>
<body>
<header class="header">
  <div class="container header__in">
    <div class="brand"><span class="brand__logo">Z</span> ZADORA</div>
    <div class="flex-1"></div>
    <button class="btn" onclick="openWishlist()">🩶</button>
    <button class="btn" onclick="document.getElementById('wholesale').scrollIntoView({behavior:'smooth'})">طلب جملة</button>
    <button class="btn" onclick="openCart()">السلة <span data-cart-count>0</span></button>
    <div id="wishSheet" class="sheet" role="dialog" aria-modal="true">
  <div class="sheet__inner">
    <div class="row" style="justify-content:space-between">
      <h3 style="margin:0">قائمة الرغبات</h3>
      <button class="btn" onclick="closeWishlist()">✕</button>
    </div>
    <div id="wishList" class="cart-list" style="margin-top:10px"></div>
  </div>
</div>
  </div>
</header>

<section class="hero">
  <div class="inner">
    <div class="badge">تجارة الجملة • شحن كل المحافظات</div>
    <h1>منتجات منزلية وهدايا بجودة ممتازة</h1>
  <p>أقل كمية للطلب: <b>6 قطع/صنف</b></p>
    <div class="row" style="justify-content:center">
      <button class="btn btn-accent" onclick="document.getElementById('homeGrid').scrollIntoView({behavior:'smooth'})">تسوق الآن</button>
      <button class="btn" onclick="openCart()">عرض السلة</button>
    </div>
  </div>
</section>

<main class="container">
  <section style="padding:16px 0">
    <h2 style="margin:10px 0">الأكثر طلبًا</h2>
    <div id="homeGrid" class="grid grid--products"></div>
  </section>

  <!-- فورم الجملة/نص جملة -->
  <section id="wholesale" style="padding:10px 0 24px">
    <h2 style="margin:10px 0">طلب جملة / نص جملة</h2>
    <div class="grid" style="grid-template-columns:1fr">
      <div class="row">
        <label class="badge">نوع العميل</label>
        <select id="custType" class="input" style="max-width:240px">
          <option value="wholesale">Wholesale (جملة)</option>
          <option value="half">Half-Wholesale (نص جملة)</option>
        </select>
      </div>

      <div id="typeMsg" class="badge">عميل جملة: خصم 2% يطبق تلقائيًا على الإجمالي.</div>

      <input id="wName"  class="input" placeholder="الاسم/المؤسسة" />
      <input id="wPhone" class="input" placeholder="أرقام التواصل (إجباري)" />
      <input id="wCity"  class="input" placeholder="المحافظة / المدينة / المنطقة" />
      <input id="wAddr"  class="input" placeholder="العنوان التفصيلي للشحن (شارع، عمارة، دور)"/>
      <input id="wPage"  class="input" placeholder="رابط صفحتك (Facebook/Instagram) — إجباري" />
      <input id="wEmail" class="input" placeholder="البريد الإلكتروني (اختياري)" />
      <input id="wSite"  class="input" placeholder="الموقع الإلكتروني (اختياري)" />

      <label class="row" style="gap:8px">
        <input type="checkbox" id="beSeller" />
        أرغب في التسجيل كتاجر على ZADORA SITE (عمولة 2% فقط — وإحنا بنتولى الدعاية كاملة)
      </label>

      <button class="btn btn-accent" onclick="whatsappWholesale()">إرسال بيانات الجملة على واتساب</button>
    </div>
  </section>
</main>

<!-- شيت السلة -->
<div id="cartSheet" class="sheet" role="dialog" aria-modal="true">
  <div class="sheet__inner">
    <div class="row" style="justify-content:space-between"><h3 style="margin:0">السلة</h3><button class="btn" onclick="closeCart()">إغلاق ✕</button></div>
    <div id="cartList" class="cart-list" style="margin-top:10px"></div>

    <div id="totalsBox" class="row" style="justify-content:space-between;margin-top:12px;flex-wrap:wrap">
      <div class="price">الإجمالي قبل الخصم: <span id="cartSub">EGP 0</span></div>
      <div class="badge">خصم الجملة 2%: <span id="cartDisc">EGP 0</span></div>
      <div class="price">إجمالي الدفع: <span id="cartTotal">EGP 0</span></div>
    </div>

    <div id="checkout" style="margin-top:14px">
      <h4 style="margin:6px 0">بيانات التوصيل السريعة</h4>
      <div class="grid">
        <input id="custName" class="input" placeholder="الاسم الثلاثي" />
        <input id="custAddr" class="input" placeholder="العنوان بالتفصيل + المنطقة/المحافظة" />
        <textarea id="custNote" class="input" placeholder="ملاحظات الطلب (اختياري)"></textarea>
      </div>
      <button class="btn btn-accent" style="margin-top:10px" onclick="whatsappCheckout()">إرسال الطلب على واتساب</button>
      <div class="badge" style="margin-top:8px">سيتم التأكيد على واتساب قبل الشحن</div>
    </div>
  </div>
</div>

<!-- تيكر جانبي -->
<div id="sideTicker"><div class="marquee">حد أدنى 6 قطع/صنف — خصم 2% لعملاء الجملة — Free Random Box لعملاء نص الجملة — عمولة 2% فقط للتجار على ZADORA — </div></div>

<footer class="footer">© 2025 ZADORA • جميع الحقوق محفوظة</footer>
<div class="row" style="gap:6px">
  <button class="btn btn-accent" onclick="addToCart('${p.id}')">أضف للسلة</button>
  <button class="btn" onclick="toggleWish('${p.id}')">❤️</button>
</div>
<script>
/* ===== إعدادات ===== */
const WHATSAPP_PHONE = '201119508881'; // ← غيّر رقمك (بدون +)
const STORE_KEY = 'zadora_products_v4';
const CART_KEY  = 'zadora_cart_v2';
const MIN_QTY_PER_ITEM = 6;
const WHOLESALE_DISCOUNT = 0.02;
const IMG_FALLBACK = 'https://images.unsplash.com/photo-1523362628745-0c100150b840?q=80&w=1200&auto=format&fit=crop';

const $ = s=>document.querySelector(s); const $$= s=>[...document.querySelectorAll(s)];
const money = n => 'EGP ' + Number(n||0).toLocaleString('en-EG');

/* ===== بيانات ابتدائية ===== */
function sampleProducts(){
  return [
    {id:'p1',name:'طقم مجات سيراميك x6', price:420, cat:'هدايا', img:'https://images.unsplash.com/photo-1523362628745-0c100150b840?q=80&w=1200&auto=format&fit=crop'},
    {id:'p2',name:'صينية استانلس 40 سم',  price:350, cat:'مطبخ', img:'https://images.unsplash.com/photo-1596040033229-9a55f4c3b6ac?q=80&w=1200&auto=format&fit=crop'},
    {id:'p3',name:'برطمان زجاج 1 لتر',   price:120, cat:'منزل', img:'https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1200&auto=format&fit=crop'},
    {id:'p4',name:'غلاية بايركس 2 لتر',  price:540, cat:'مطبخ', img:'https://images.unsplash.com/photo-1544025162-d76694265947?q=80&w=1200&auto=format&fit=crop'}
  ];
}

/* ===== LocalStorage ===== */
const getProducts = () => JSON.parse(localStorage.getItem(STORE_KEY) || 'null') || (localStorage.setItem(STORE_KEY, JSON.stringify(sampleProducts())), sampleProducts());
const setProducts = (arr) => localStorage.setItem(STORE_KEY, JSON.stringify(arr));
const getCart     = () => JSON.parse(localStorage.getItem(CART_KEY) || '[]');
const setCart     = (arr) => localStorage.setItem(CART_KEY, JSON.stringify(arr));

/* ===== منتجات الصفحة الرئيسية ===== */
function renderHomeProducts(){
  const wrap = document.getElementById('homeGrid');
  wrap.innerHTML = getProducts().map(p=>`
    <div class="card">
      <img src="${p.img||IMG_FALLBACK}" alt="${p.name}" onerror="this.src='${IMG_FALLBACK}'">
      <div class="pad">
        <div class="badge">${p.cat||'عام'}</div>
        <h3 style="margin:.4em 0">${p.name}</h3>
        <div class="row" style="justify-content:space-between;align-items:center">
          <div class="price">${money(p.price)}</div>
        <div class="row" style="gap:6px">
  <button class="btn btn-accent" onclick="addToCart('${p.id}')">أضف للسلة</button>
  <button class="btn" onclick="toggleWish('${p.id}')">❤️</button>
</div>
        </div>
        <div class="badge" style="margin-top:6px">الحد الأدنى لهذا الصنف: ${MIN_QTY_PER_ITEM} قطع</div>
      </div>
    </div>
  `).join('');
}

/* ===== السلة + الحد الأدنى ===== */
function addToCart(id){
  const cart = getCart();
  const i = cart.findIndex(x=>x.id===id);
  if(i>-1){
    cart[i].qty += 1;
    if(cart[i].qty < MIN_QTY_PER_ITEM) cart[i].qty = MIN_QTY_PER_ITEM;
  }else{
    cart.push({id, qty: MIN_QTY_PER_ITEM}); // أول مرة = 6 قطع
  }
  setCart(cart); renderCart(); openCart(); updateTotals();
}
function qty(id,delta){
  const cart = getCart(); const i = cart.findIndex(x=>x.id===id);
  if(i>-1){
    cart[i].qty += delta;
    if(cart[i].qty < MIN_QTY_PER_ITEM) cart[i].qty = MIN_QTY_PER_ITEM; // لا تقل عن 6
    setCart(cart); renderCart(); updateTotals();
  }
}
function removeItem(id){ setCart(getCart().filter(x=>x.id!==id)); renderCart(); updateTotals(); }
function renderCart(){
  const list = document.getElementById('cartList');
  const products = getProducts(); const cart = getCart();
  if(cart.length===0){ list.innerHTML = '<div class="badge">السلة فارغة</div>'; updateTotals(); return; }
  list.innerHTML = cart.map(it=>{
    const p = products.find(x=>x.id===it.id);
    const sum = (p?.price||0)*it.qty;
    return `
      <div class="cart-item">
        <div class="row">
          <img src="${p?.img||IMG_FALLBACK}" style="width:70px;height:70px;object-fit:cover;border-radius:10px" onerror="this.src='${IMG_FALLBACK}'" />
          <div>
            <div style="font-weight:800">${p?.name||'-'}</div>
            <div class="badge">${money(p?.price||0)} × ${it.qty} (حد أدنى ${MIN_QTY_PER_ITEM})</div>
          </div>
        </div>
        <div>
          <div class="price" style="text-align:end">${money(sum)}</div>
          <div class="row" style="justify-content:flex-end;margin-top:6px">
            <button class="btn" onclick="qty('${it.id}',-1)">−</button>
            <button class="btn" onclick="qty('${it.id}',1)">+</button>
            <button class="btn" onclick="removeItem('${it.id}')">حذف</button>
          </div>
        </div>
      </div>`;
  }).join('');
}

/* ===== حساب الإجمالي + خصم الجملة ===== */
function updateTotals(){
  const cart = getCart(); const products=getProducts();
  let sub = 0; cart.forEach(it=>{ const p=products.find(x=>x.id===it.id); sub += (p?.price||0)*it.qty; });

  const custType = document.getElementById('custType')?.value || 'wholesale';
  let disc = custType==='wholesale' ? sub*WHOLESALE_DISCOUNT : 0;
  let total = sub - disc;

  document.getElementById('cartSub').textContent  = money(sub);
  document.getElementById('cartDisc').textContent = money(disc);
  document.getElementById('cartTotal').textContent= money(total);

  const typeMsg = document.getElementById('typeMsg');
  if(custType==='wholesale'){
    typeMsg.textContent = 'عميل جملة: مبروك! خصم 2% تم تطبيقه تلقائيًا.';
  }else{
    typeMsg.textContent = 'عميل نص جملة: مبروك! كسبت Free Random Box from ZADORA.';
  }
}

/* ===== فتح/إغلاق السلة ===== */
function openCart(){ document.getElementById('cartSheet').style.display='flex'; renderCart(); updateTotals(); }
function closeCart(){ document.getElementById('cartSheet').style.display='none'; }

/* ===== واتساب — إتمام طلب السلة ===== */
function whatsappCheckout(){
  const products=getProducts(); const cart=getCart(); if(cart.length===0){ alert('السلة فارغة'); return; }
  // تحقق من الحد الأدنى
  for(const it of cart){ if(it.qty < MIN_QTY_PER_ITEM){ alert('الحد الأدنى لكل صنف 6 قطع'); return; } }

  let lines=['طلب جديد من ZADORA:']; let sub=0;
  cart.forEach(it=>{ const p=products.find(x=>x.id===it.id); const s=(p?.price||0)*it.qty; sub+=s; lines.push(`- ${p?.name} × ${it.qty} = ${s} EGP`); });
  const custType = document.getElementById('custType')?.value || 'wholesale';
  const disc = custType==='wholesale' ? Math.round(sub*WHOLESALE_DISCOUNT) : 0;
  const total = sub - disc;
  lines.push(`الإجمالي قبل الخصم = ${sub} EGP`);
  if(disc>0) lines.push(`خصم 2% (جملة) = -${disc} EGP`);
  lines.push(`إجمالي الدفع = ${total} EGP`);

  const name=$('#custName').value||''; const addr=$('#custAddr').value||''; const note=$('#custNote').value||'';
  if(name) lines.push('الاسم: '+name); if(addr) lines.push('العنوان: '+addr); if(note) lines.push('ملاحظات: '+note);

  const msg = encodeURIComponent(lines.join('\n'));
  window.open(`https://wa.me/${WHATSAPP_PHONE}?text=${msg}`,'_blank');
}

/* ===== واتساب — إرسال بيانات الجملة/نص الجملة ===== */
function whatsappWholesale(){
  const type = $('#custType').value;
  const name = $('#wName').value.trim();
  const phone= $('#wPhone').value.trim();
  const city = $('#wCity').value.trim();
  const addr = $('#wAddr').value.trim();
  const page = $('#wPage').value.trim();
  const email= $('#wEmail').value.trim();
  const site = $('#wSite').value.trim();
  const beSeller = $('#beSeller').checked;

  // تحقق إجباري
  if(!phone || !page){ alert('من فضلك أدخل أرقام التواصل ولينك صفحتك.'); return; }

  const lines = [
    'بيانات عميل (جملة/نص جملة):',
    `النوع: ${type==='wholesale'?'Wholesale (جملة)':'Half-Wholesale (نص جملة)'}`,
    `الاسم/المؤسسة: ${name||'-'}`,
    `موبايل: ${phone}`,
    `المحافظة/المدينة: ${city||'-'}`,
    `العنوان التفصيلي: ${addr||'-'}`,
    `صفحة: ${page}`,
    `إيميل: ${email||'-'}`,
    `موقع: ${site||'-'}`
  ];

  if(type==='wholesale'){
    lines.push('🎉 مبروك! خصم 2% بيتطبق على إجمالي فواتيرك.');
  }else{
    lines.push('🎁 نص جملة: مبروك! Free Random Box from ZADORA.');
  }

  if(beSeller){
    lines.push('طلب تسجيل كتاجر على ZADORA SITE ✅ (عمولة 2% على المبيعات، والدعاية علينا).');
  }

  const msg = encodeURIComponent(lines.join('\n'));
  window.open(`https://wa.me/${WHATSAPP_PHONE}?text=${msg}`,'_blank');
}

/* ===== أحداث ===== */
document.addEventListener('DOMContentLoaded',()=>{
  if(!localStorage.getItem(STORE_KEY)) setProducts(sampleProducts());
  renderHomeProducts();
  updateTotals();
  $('#custType').addEventListener('change', updateTotals);
});
</script>
</body>
</html>